<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>NGV Interactive Experience</title>
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon.png">
  <link rel="stylesheet" href="css/app.css">
  <script src="scripts/jscolor.js"></script>
</head>

<body>
  <span class="border-left"></span>
  <span class="border-right"></span>

  <div id="homepage" class="main" style="z-index: 2">
    <div class="block-orange" style="text-align: center; padding: 80px; overflow: hidden;">
      <img src="images/logo.svg" style="width: 100%" />
      <h1 style="padding: 40px 0px">Mark<br />Rothko</h1>
      <p>American, born Russia (now Latvia).<br />1903–1970</p>
    </div>
    <div class="block-black"></div>
    <div class="block-white" style="padding: 40px; display: flex; flex-direction: column; justify-content: space-between; overflow: hidden;">
      <div>
        <img src="images/name.png" style="width: 100%" />
        <p style="padding-top: 40px"><b>Mark Rothko</b> sought to make paintings that would bring people to tears. “I’m
          interested only in expressing basic human emotions—tragedy, ecstasy, doom, and so on,” he declared. “And the
          fact that a lot of people break down and cry when confronted with my pictures shows that I can communicate
          those basic human emotions….If you…are moved only by their color relationships, then you miss the point.”1
          Like his fellow New York School painters Barnett Newman and Clyfford Still, Rothko painted to plumb the
          depths of himself and the human condition. For him, art was a profound form of communication, and art making
          was a moral act.</p>
      </div>
      <button style="color: #FCFAE5; background-color: #242724">Learn More</button>
    </div>
    <div class="block-pink" style="padding: 40px; display: flex; flex-direction: column; justify-content: space-between; overflow: hidden;">
      <h2>Create<br />your own<br />masterpiece</h2>
      <img src="images/icons/paint.svg" style="width: 100%; padding: 40px" />
      <button id="enter" style="color: #EA5A97; background-color: #FCFAE5">Start Now</button>
    </div>
  </div>

  <div id="drawingpage" class="main" style="z-index: 1">
    <div class="block-white" style="width: 100%; height: 100%">
      <div class="literally"></div>
      <div style="display: flex; flex-direction: row; justify-content: space-between; height: 100%; padding: 40px;">
        <div style="display: flex; flex-direction: column; justify-content: space-around;">
          <div class="menu">
            <!--
            <a id="tool-color" class="tool" href="javascript:void(0);">
              <img src="images/icons/color.svg" class="icon" style="z-index: 20" />
            </a>
            <a id="tool-fill" class='tool' href="javascript:void(0);">
              <img src="images/icons/fill.svg" class="icon" />
            </a>
            <a id="tool-stamp" class='tool' href="javascript:void(0);">
              <img src="images/icons/stamp.svg" class="icon" />
            </a>
            -->
            <a id="tool-pencil" class='tool' href="javascript:void(0);" style="border-radius: 6px 6px 0px 0px">
              <img src="images/icons/pen.svg" class="icon" />
            </a>
            <a id="tool-text" class='tool' href="javascript:void(0);">
              <img src="images/icons/font.svg" class="icon" />
            </a>
            <a id="tool-rectangle" class='tool' href="javascript:void(0);">
              <img src="images/icons/shape.svg" class="icon" />
            </a>
            <a id="tool-eraser" class='tool' href="javascript:void(0);">
              <img src="images/icons/eraser.svg" class="icon" />
            </a>
            <a id="save-lc" class='tool' href="javascript:void(0);">
              <img src="images/icons/save.svg" class="icon" />
            </a>
            <a id="clear-lc" class='tool' href="javascript:void(0);">
              <img src="images/icons/delete.svg" class="icon" />
            </a>
            <a class='tool' style="padding: 0.8vw">
              <input name="color" type="hidden" id="color_value" value="e3302d">
              <button id="tool-color" class="jscolor { valueElement:'color_value', width:300, height:300, shadow:false }">
              </button>
            </a>
            <!--
            <div class="toolset">
              <span class='toolLabel'>Actions:</span>
              <a href="javascript:void(0);" class='tool' id="open-image">Open image</a>
              <a href="javascript:void(0);" class='tool' id="change-size">Change size</a>
              <a href="javascript:void(0);" class='tool' id="reset-size">Reset size</a>
              <a href="javascript:void(0);" class='tool' id="hide-lc">Teardown</a>
              <a href="javascript:void(0);" class='tool' id="show-lc">Setup</a>
              <a href="javascript:void(0);" class='tool' id="clear-lc">Clear</a>
            </div>
            <div class="toolset">
              <span class='toolLabel'>Tools:</span>
              <a href="javascript:void(0);" class='tool' id="tool-pencil">Pencil</a>
              <a href="javascript:void(0);" class='tool' id="tool-eraser">Eraser</a>
              <a href="javascript:void(0);" class='tool' id="tool-text">Text</a>
              <a href="javascript:void(0);" class='tool' id="tool-line">Line</a>
              <a href="javascript:void(0);" class='tool' id="tool-arrow">Arrow</a>
              <a href="javascript:void(0);" class='tool' id="tool-dashed">Dashed Line</a>
              <a href="javascript:void(0);" class='tool' id="tool-ellipse">Ellipse</a>
              <a href="javascript:void(0);" class='tool' id="tool-rectangle">Rectangle</a>
              <a href="javascript:void(0);" class='tool' id="tool-polygon">Polygon</a>
              <a href="javascript:void(0);" class='tool' id="tool-select">Select</a>
            </div>
            -->
          </div>
        </div>
        <div style="display: flex;flex-direction: column;justify-content: space-between; align-items: flex-end;">
          <img src="images/logo.svg" style="width: 200px; z-index: 10;" />
          <div class="menu">
            <a id="sizeTool-3" class='tool' href="javascript:void(0);" style="border-radius: 6px 6px 0px 0px">
              <img src="images/icons/circle.svg" class="icon" style="width: 2.5vw" />
            </a>
            <a id="sizeTool-2" class='tool' href="javascript:void(0);">
              <img src="images/icons/circle.svg" class="icon" style="width: 2vw" />
            </a>
            <a id="sizeTool-1" class='tool' href="javascript:void(0);" style="border-radius: 0px 0px 6px 6px">
              <img src="images/icons/circle.svg" class="icon" style="width: 1.5vw" />
            </a>
          </div>
          <button id="exit" style="color: #FCFAE5; background-color: #242724; z-index: 10;">Exit</button>
        </div>
      </div>
    </div>
  </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.js"></script>
  <script src="scripts/literallycanvas.js"></script>

  <script type="text/javascript">
    // Navigation
    $(function () {
      $('#enter').click(function () {
        $('#homepage').css('z-index', '1');
        $('#drawingpage').css('z-index', '2');
        lc.clear();
      })
      $('#exit').click(function () {
        $('#homepage').css('z-index', '2');
        $('#drawingpage').css('z-index', '1');
        lc.clear();
      })
    });

    // Inactivity (Return to home page after 3 minutes of inactivity)
    var idleTime = 0;
    $(document).ready(function () {
      var idleInterval = setInterval(timerIncrement, 60000);

      $(this).mousemove(function (e) {
        idleTime = 0;
      });
      $(this).keypress(function (e) {
        idleTime = 0;
      });
    });

    function timerIncrement() {
      idleTime = idleTime + 1;
      if (idleTime > 2) {
        $('#homepage').css('z-index', '2');
        $('#drawingpage').css('z-index', '1');
        lc.clear();
      }
    }

    // Canvas
    var lc = null;
    var tools;
    var strokeWidths;
    var colors;

    var setCurrentByName;
    var findByName;

    var containerOne = document.getElementsByClassName('literally')[0];

    var showLC = function () {
      lc = LC.init(containerOne, {
        defaultStrokeWidth: 10,
        primaryColor: '#e3302d',
        strokeWidths: [10, 20, 50],
        secondaryColor: 'transparent'
      });
      window.demoLC = lc;

      $("#open-image").click(function () {
        window.open(lc.getImage({
          scale: 1, margin: { top: 10, right: 10, bottom: 10, left: 10 }
        }).toDataURL());
      });

      $("#change-size").click(function () {
        lc.setImageSize(null, 200);
      });

      $("#reset-size").click(function () {
        lc.setImageSize(null, null);
      });

      $("#clear-lc").click(function () {
        lc.clear();
      });

      $("#save-lc").click(function (event) {
        event.stopPropagation();
        event.preventDefault();
        event.stopImmediatePropagation();
        var data = lc.getImage().toDataURL();
        function download(filename, data) {
          var pom = document.createElement('a');
          pom.setAttribute('href', data);
          pom.setAttribute('download', filename);

          if (document.createEvent) {
            var event = document.createEvent('MouseEvents');
            event.initEvent('click', true, true);
            pom.dispatchEvent(event);
          }
          else {
            pom.click();
          }
        }
        download('Masterpiece.PNG', data)
      });

      tools = [
        {
          name: 'pencil',
          el: document.getElementById('tool-pencil'),
          tool: new LC.tools.Pencil(lc)
        }, {
          name: 'eraser',
          el: document.getElementById('tool-eraser'),
          tool: new LC.tools.Eraser(lc)
        }, {
          name: 'text',
          el: document.getElementById('tool-text'),
          tool: new LC.tools.Text(lc)
        }, {
          name: 'line',
          el: document.getElementById('tool-line'),
          tool: new LC.tools.Line(lc)
        }, {
          name: 'arrow',
          el: document.getElementById('tool-arrow'),
          tool: function () {
            arrow = new LC.tools.Line(lc);
            arrow.hasEndArrow = true;
            return arrow;
          }()
        }, {
          name: 'dashed',
          el: document.getElementById('tool-dashed'),
          tool: function () {
            dashed = new LC.tools.Line(lc);
            dashed.isDashed = true;
            return dashed;
          }()
        }, {
          name: 'ellipse',
          el: document.getElementById('tool-ellipse'),
          tool: new LC.tools.Ellipse(lc)
        }, {
          name: 'tool-rectangle',
          el: document.getElementById('tool-rectangle'),
          tool: new LC.tools.Rectangle(lc)
        }, {
          name: 'tool-polygon',
          el: document.getElementById('tool-polygon'),
          tool: new LC.tools.Polygon(lc)
        }, {
          name: 'tool-select',
          el: document.getElementById('tool-select'),
          tool: new LC.tools.SelectShape(lc)
        }
      ];

      strokeWidths = [
        {
          name: 10,
          el: document.getElementById('sizeTool-1'),
          size: 10
        }, {
          name: 20,
          el: document.getElementById('sizeTool-2'),
          size: 20
        }, {
          name: 50,
          el: document.getElementById('sizeTool-3'),
          size: 50
        }
      ];

      setCurrentByName = function (ary, val) {
        ary.forEach(function (i) {
          $(i.el).toggleClass('current', (i.name == val));
        });
      };

      findByName = function (ary, val) {
        var vals;
        vals = ary.filter(function (v) {
          return v.name == val;
        });
        if (vals.length == 0)
          return null;
        else
          return vals[0];
      };

      tools.forEach(function (t) {
        $(t.el).click(function () {
          var sw;
          lc.setTool(t.tool);
          setCurrentByName(tools, t.name);
          setCurrentByName(strokeWidths, t.tool.strokeWidth);
        });
      });
      setCurrentByName(tools, tools[0].name);

      strokeWidths.forEach(function (sw) {
        $(sw.el).click(function () {
          lc.trigger('setStrokeWidth', sw.size);
          setCurrentByName(strokeWidths, sw.name);
        })
      })
      setCurrentByName(strokeWidths, strokeWidths[0].name);

      $("#color_value").change(function () {
        lc.setColor('primary', '#' + $('#color_value').val())
      });

    };

    $(document).ready(function () {
      showLC();
      $(document).bind('touchmove', function (e) {
        if (e.target === document.documentElement) {
          return e.preventDefault();
        }
      });
      showLC();
    });

    $('#hide-lc').click(function () {
      if (lc) {
        lc.teardown();
        lc = null;
      }
    });

    $('#show-lc').click(function () {
      if (!lc) { showLC(); }
    });
  </script>

</body>

</html>